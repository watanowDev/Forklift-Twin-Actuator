#pragma once

#include <memory>
#include "../EventAggregator.h"
#include "../LEDModels.h"

namespace LEDModule {

// Patlite LED 및 Buzzer 제어 클래스
class PatliteLEDBuzzer {
public:
    PatliteLEDBuzzer(EventAggregator& event_aggregator, const LedBuzzerConfig& config);
    ~PatliteLEDBuzzer();
    
    // 초기화
    bool Init();
    
    // LED 이벤트 핸들러
    void OnLEDEvent(const PatliteLEDBuzzerModel& status);

private:
    EventAggregator& event_aggregator_;
    LedBuzzerConfig config_;
    std::shared_ptr<SubscriptionToken> subscription_token_;
    bool is_connected_;
    
    // LED 설정
    void SetLight(LEDColors color, LEDPatterns pattern);
    
    // 부저 설정
    void SetBuzzer(BuzzerPatterns pattern, int count);
    
    // 디바이스 상태 확인
    bool GetDeviceState(bool& buzzer_state, bool& led_state, bool& touch_state);
    
    // 리소스 정리
    void Cleanup();
};

} // namespace LEDModule
